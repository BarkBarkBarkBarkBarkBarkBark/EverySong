{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://example.com/request.schema.json",
    "title": "EverySong Request",
    "type": "object",
    "additionalProperties": false,
    "required": ["n", "name"],
    "properties": {
      "n": {
        "type": "integer",
        "minimum": 1,
        "maximum": 10000,
        "description": "Number of tracks to add."
      },
      "name": {
        "type": "string",
        "minLength": 1,
        "description": "Playlist name."
      },
      "public": {
        "type": "boolean",
        "default": false,
        "description": "Whether the playlist is public."
      },
      "genres": {
        "type": "array",
        "items": { "type": "string", "minLength": 1 },
        "default": [],
        "description": "MusicBrainz tags to sample uniformly across (lowercase)."
      },
      "per_genre_batch": {
        "type": "integer",
        "minimum": 5,
        "maximum": 200,
        "default": 20,
        "description": "Candidates emitted per genre per round."
      },
      "artist_cap": {
        "type": "integer",
        "minimum": 1,
        "maximum": 10,
        "default": 2,
        "description": "Max tracks per primary artist."
      },
      "markets": {
        "type": "array",
        "items": { "type": "string", "pattern": "^[A-Z]{2}$|^GLOBAL$" },
        "default": ["GLOBAL"],
        "description": "ISO markets; include 'GLOBAL' to expand to a wide preset."
      },
      "year_min": {
        "type": ["integer", "null"],
        "minimum": 1900,
        "maximum": 2100,
        "default": null,
        "description": "Earliest release year (inclusive)."
      },
      "year_max": {
        "type": ["integer", "null"],
        "minimum": 1900,
        "maximum": 2100,
        "default": null,
        "description": "Latest release year (inclusive)."
      },
      "fresh_years": {
        "type": ["integer", "null"],
        "minimum": 1,
        "maximum": 50,
        "default": null,
        "description": "If set (e.g., 5), compute year_min = current_year - (N - 1), year_max = current_year."
      }
    }
  }
  